'use strict';

var path = require('path');
var fs = require('fs');

function resolveRealPath(path$1) {
  try {
    return fs.realpathSync(path$1);
  } catch (ex) {
    if (ex.code !== "ENOENT") {
      throw ex;
    }
  }
  try {
    if (fs.lstatSync(path$1).isSymbolicLink()) {
      const target = path.resolve(path.dirname(path$1), fs.readlinkSync(path$1));
      return resolveRealPath(target);
    }
  } catch (ex) {
    if (ex.code !== "ENOENT") {
      throw ex;
    }
  }
  const parent = path.dirname(path$1);
  if (parent === path$1) {
    return path$1;
  }
  return path.resolve(resolveRealPath(parent), path.basename(path$1));
}
function isChildPath(base, path$1) {
  const resolvedBase = resolveRealPath(base);
  const resolvedPath = resolveRealPath(path$1);
  const relativePath = path.relative(resolvedBase, resolvedPath);
  if (relativePath === "") {
    return true;
  }
  const outsideBase = relativePath.startsWith("..");
  const differentDrive = path.isAbsolute(relativePath);
  return !outsideBase && !differentDrive;
}

exports.isChildPath = isChildPath;
//# sourceMappingURL=isChildPath.cjs.js.map

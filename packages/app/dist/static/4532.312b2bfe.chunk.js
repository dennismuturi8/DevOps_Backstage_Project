"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([["4532"],{45575(e,t,a){a.d(t,{f:()=>d});var n=a(31085),i=a(77125),o=a(99703),r=a(58837),s=a(72501);let l=(0,r.A)(e=>(0,o.A)({root:{color:e.getPageTheme({themeId:"card"}).fontColor,padding:e.spacing(2,2,3),backgroundImage:e.getPageTheme({themeId:"card"}).backgroundImage,backgroundPosition:0,backgroundSize:"inherit"}}),{name:"BackstageItemCardHeader"});function d(e){let{title:t,subtitle:a,children:o}=e,r=l(e);return(0,n.jsxs)(i.A,{className:r.root,children:[a&&(0,n.jsx)(s.A,{variant:"subtitle2",component:"h3",children:a}),t&&(0,n.jsx)(s.A,{variant:"h6",component:"h4",children:t}),o]})}},92303(e,t,a){a.d(t,{d:()=>r});var n=a(31085),i=a(79182),o=a(82326);function r(e){let{themeId:t,children:a,...r}=e;return(0,n.jsxs)(o.Y,{themeId:t,children:[(0,n.jsx)(i.Y,{...r}),a]})}},4348(e,t,a){a.d(t,{V:()=>n});function n(e,t){return t.getOptionalBoolean("techdocs.legacyUseCaseSensitiveTripletPaths")?e:e.toLocaleLowerCase("en-US")}},67633(e,t,a){a.d(t,{o:()=>h});var n=a(31085),i=a(11688),o=a(32585),r=a(96170),s=a(96814),l=a(17749),d=a(3571),c=a(56711),m=a(87318),u=a(143),p=a(61231),g=a(51529);let h=e=>{let{entities:t,title:a,loading:h,columns:x,actions:f,options:j}=e,[,C]=(0,i.A)(),v=(0,o.S)(l.Oc),y=(0,r.gf)(s.U);if(!t)return null;let S=(0,g.H)(t,v,y),k=[u.f.createCopyDocsUrlAction(C)],w=S&&S.length>20;return(0,n.jsx)(n.Fragment,{children:h||S&&S.length>0?(0,n.jsx)(d.X,{isLoading:h,options:{paging:w,pageSize:20,search:!0,actionsColumnIndex:-1,...j},data:S,columns:x||p.F,actions:f||k,title:a?`${a} (${S.length})`:`All (${S.length})`}):(0,n.jsx)(c.p,{missing:"data",title:"No documents to show",description:"Create your own document. Check out our Getting Started Information",action:(0,n.jsx)(m.z,{color:"primary",to:"https://backstage.io/docs/features/techdocs/getting-started",variant:"contained",children:"DOCS"})})})};h.columns=p.B,h.actions=u.f},143(e,t,a){a.d(t,{f:()=>r});var n=a(31085),i=a(55290),o=a(23730);let r={createCopyDocsUrlAction:e=>t=>({icon:()=>(0,n.jsx)(i.default,{fontSize:"small"}),tooltip:"Click to copy documentation link to clipboard",onClick:()=>e(`${window.location.origin}${t.resolved.docsUrl}`)}),createStarEntityAction:(e,t)=>a=>{let i=a.entity,r=e(i);return{cellStyle:{paddingLeft:"1em"},icon:()=>(0,n.jsx)(o.m,{isFavorite:r}),tooltip:r?"Remove from favorites":"Add to favorites",onClick:()=>t(i)}}}},61231(e,t,a){a.d(t,{B:()=>l,F:()=>d});var n=a(31085),i=a(49907),o=a(75202),r=a(14158);function s(e){return e.metadata.title||e.metadata.name}let l={createTitleColumn:e=>({...l.createNameColumn(),field:"entity.metadata.title",hidden:e?.hidden}),createNameColumn:()=>({title:"Document",field:"entity.metadata.name",highlight:!0,searchable:!0,defaultSort:"asc",customSort:(e,t)=>{let a=s(e.entity).toLocaleLowerCase(),n=s(t.entity).toLocaleLowerCase();return a.localeCompare(n)},render:e=>(0,n.jsx)(i.m,{value:(0,n.jsx)(o.N_,{to:e.resolved.docsUrl,children:s(e.entity)}),subvalue:e.entity.metadata.description})}),createOwnerColumn:()=>({title:"Owner",field:"resolved.ownedByRelationsTitle",render:({resolved:e})=>(0,n.jsx)(r.i,{entityRefs:e.ownedByRelations,defaultKind:"group"})}),createKindColumn:()=>({title:"Kind",field:"entity.kind"}),createTypeColumn:()=>({title:"Type",field:"entity.spec.type"})},d=[l.createTitleColumn({hidden:!0}),l.createNameColumn(),l.createOwnerColumn(),l.createKindColumn(),l.createTypeColumn()]},51529(e,t,a){a.d(t,{H:()=>s});var n=a(97214),i=a(699),o=a(53318),r=a(4348);function s(e,t,a){return e.map(e=>{let s=(0,i.t)(e,n.vv);return{entity:e,resolved:{docsUrl:t({namespace:(0,r.V)(e.metadata.namespace??"default",a),kind:(0,r.V)(e.kind,a),name:(0,r.V)(e.metadata.name,a)}),ownedByRelations:s,ownedByRelationsTitle:s.map(e=>(0,o.S)(e,{defaultKind:"group"})).join(", ")}}})}},88047(e,t,a){a.d(t,{TechDocsCustomHome:()=>K});var n=a(31085),i=a(14041),o=a(73466),r=a(58837),s=a(97214),l=a(78560),d=a(96170),c=a(79890),m=a(699),u=a(18453),p=a(30043),g=a(24259),h=a(67633),x=a(17749),f=a(4348),j=a(32585),C=a(96814),v=a(17174),y=a(45575),S=a(87318),k=a(40703),w=a(59469),A=a(48653),b=a(57369),I=a(17138),P=a(56420),U=a(16454),T=a(96872),D=a(99338),B=a(62112),z=a(44390),L=a(21332),E=a(75202),N=a(91072);let R=(0,r.A)(e=>({linkSpacer:{paddingTop:e.spacing(.2)},readMoreLink:{paddingTop:e.spacing(.2)}}),{name:"BackstageInfoCardGrid"});var F=a(88461),O=a(55411),V=a(19108);let M={DocsTable:h.o,DocsCardGrid:e=>{let{entities:t}=e,a=(0,j.S)(x.Oc),i=(0,d.gf)(C.U);return t?(0,n.jsx)(v.s,{"data-testid":"docs-explore",children:t?.length?t.map((e,t)=>(0,n.jsxs)(k.A,{children:[(0,n.jsx)(b.A,{children:(0,n.jsx)(y.f,{title:e.metadata.title??e.metadata.name})}),(0,n.jsx)(A.A,{children:e.metadata.description}),(0,n.jsx)(w.A,{children:(0,n.jsx)(S.z,{to:a({namespace:(0,f.V)(e.metadata.namespace??"default",i),kind:(0,f.V)(e.kind,i),name:(0,f.V)(e.metadata.name,i)}),color:"primary","data-testid":"read_docs",children:"Read Docs"})})]},t)):null}):null},TechDocsIndexPage:O.TechDocsIndexPage,InfoCardGrid:e=>{let{entities:t,linkContent:a,linkDestination:i}=e,r=R(),s=(0,j.S)(x.Oc),c=(0,d.gf)(C.U),m=(0,d.gf)(N.n),{value:u,loading:p}=(0,o.A)(async()=>new Map(await Promise.all(t?.map(async e=>{let t=await m.forEntity(e).promise;return[(0,l.U2)(e),t]})||[])));return p?(0,n.jsx)(T.k,{}):t&&t?.length?(0,n.jsx)(v.s,{"data-testid":"info-card-container",children:t.map(e=>(0,n.jsxs)(L.n,{"data-testid":e?.metadata?.title,title:u?.get((0,l.U2)(e))?.primaryTitle,children:[(0,n.jsx)("div",{children:e?.metadata?.description}),(0,n.jsx)("div",{className:r.linkSpacer}),(0,n.jsx)(E.N_,{to:(e=>{if(i){let t=i(e);if(t)return t}return s({namespace:(0,f.V)(e.metadata.namespace??"default",c),kind:(0,f.V)(e.kind,c),name:(0,f.V)(e.metadata.name,c)})})(e),className:r.readMoreLink,"data-testid":"read-docs-link",children:a||"Read Docs"})]},e.metadata.name))}):null}},G=({config:e,entities:t,index:a})=>{let p=(0,r.A)({panelContainer:{marginBottom:"2rem",...e.panelCSS?e.panelCSS:{}}})(),{loading:g,isOwnedEntity:h}=function(){let e=(0,d.gf)(c.K),{loading:t,value:a}=(0,o.A)(async()=>{let{ownershipEntityRefs:t}=await e.getBackstageIdentity();return t},[]);return{loading:t,isOwnedEntity:(0,i.useMemo)(()=>{let e=new Set(a??[]);return t=>{for(let a of(0,m.t)(t,s.vv).map(l.U2))if(e.has(a))return!0;return!1}},[a])}}(),x=M[e.panelType],f=t.filter(t=>"ownedByUser"===e.filterPredicate?!g&&h(t):"function"==typeof e.filterPredicate&&e.filterPredicate(t)),j=e.panelProps?.CustomHeader||(()=>(0,n.jsx)(I.d,{title:e.title,description:e.description,children:0===a?(0,n.jsx)(P.Y,{children:"Discover documentation in your ecosystem."}):null}));return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(j,{}),(0,n.jsx)("div",{className:p.panelContainer,children:(0,n.jsx)(u.B9,{children:(0,n.jsx)(x,{"data-testid":"techdocs-custom-panel",entities:f,...e.panelProps})})})]})},K=e=>{let{tabsConfig:t,filter:a,CustomPageWrapper:r}=e,[s,l]=(0,i.useState)(0),c=(0,d.gf)(p.v),{value:m,loading:u,error:h}=(0,o.A)(async()=>(await c.getEntities({filter:{...a,[`metadata.annotations.${V.As}`]:g.c},fields:["apiVersion","kind","metadata","relations","spec.owner","spec.type"]})).items.filter(e=>!!e.metadata.annotations?.[V.As])),x=t[s];return u?(0,n.jsx)(F.S,{CustomPageWrapper:r,children:(0,n.jsx)(U.U,{children:(0,n.jsx)(T.k,{})})}):h?(0,n.jsx)(F.S,{CustomPageWrapper:r,children:(0,n.jsx)(U.U,{children:(0,n.jsx)(D.B,{severity:"error",title:"Could not load available documentation.",children:(0,n.jsx)(B.z,{language:"text",text:h.toString()})})})}):(0,n.jsxs)(F.S,{CustomPageWrapper:r,children:[(0,n.jsx)(z.o,{selectedIndex:s,onChange:e=>l(e),tabs:t.map(({label:e},t)=>({id:t.toString(),label:e}))}),(0,n.jsx)(U.U,{"data-testid":"techdocs-content",children:x.panels.map((e,t)=>(0,n.jsx)(G,{config:e,entities:m||[],index:t},t))})]})}},55411(e,t,a){a.d(t,{TechDocsIndexPage:()=>F});var n=a(31085),i=a(18690),o=a(17138),r=a(56420),s=a(16454),l=a(18453),d=a(77509),c=a(75303),m=a(46923),u=a(56829),p=a(88461),g=a(14041),h=a(24259),x=a(19108);class f{getCatalogFilters(){return{[`metadata.annotations.${x.As}`]:h.c}}}let j=()=>{let{updateFilters:e}=(0,l.nK)();return(0,g.useEffect)(()=>{e({techdocs:new f})},[e]),null};var C=a(11688),v=a(45250),y=a(99338),S=a(62112),k=a(32585),w=a(96170),A=a(96814),b=a(44861),I=a(67633),P=a(3571),U=a(49724);function T(e){let{actions:t,columns:a,data:i,isLoading:o,options:r}=e,{updateFilters:s,setLimit:d,setOffset:c,limit:m,totalItems:u,offset:p}=(0,l.nK)(),[h,x]=(0,g.useState)(p&&m?Math.floor(p/m):0);return(0,g.useEffect)(()=>{u&&h*m>=u?c(Math.max(0,u-m)):c(Math.max(0,h*m))},[c,h,m,u]),(0,n.jsx)(P.X,{columns:a,data:i,options:{paginationPosition:"both",pageSizeOptions:[5,10,20,50,100],pageSize:m,emptyRowsWhenPaging:!1,actionsColumnIndex:-1,...r},actions:t,onSearchChange:e=>s({text:e?new U.V3(e):void 0}),page:h,onPageChange:e=>{x(e)},onRowsPerPageChange:e=>{d(e)},totalCount:u,localization:{pagination:{labelDisplayedRows:""}},isLoading:o})}function D(e){let{actions:t,columns:a,data:i,next:o,prev:r,title:s,isLoading:l,options:d,...c}=e;return(0,n.jsx)(P.X,{title:l?"":s,columns:a,data:i,options:{paginationPosition:"both",...d,pageSizeOptions:[],showFirstLastPageButtons:!1,pageSize:Number.MAX_SAFE_INTEGER,emptyRowsWhenPaging:!1,actionsColumnIndex:-1},onPageChange:e=>{e>0?o?.():r?.()},page:+!!r,totalCount:o?Number.MAX_VALUE:Number.MAX_SAFE_INTEGER,localization:{pagination:{labelDisplayedRows:""}},isLoading:l,...c})}var B=a(143),z=a(61231),L=a(17749),E=a(51529);let N=e=>{let{columns:t,actions:a,options:i}=e,{loading:o,error:r,entities:s,filters:d,paginationMode:c,pageInfo:m}=(0,l.nK)(),{isStarredEntity:u,toggleStarredEntity:p}=(0,b.I)(),[,g]=(0,C.A)(),h=(0,k.S)(L.Oc),x=(0,w.gf)(A.U),f=(0,v.capitalize)(d.user?.value??"all"),j=[B.f.createCopyDocsUrlAction(g),B.f.createStarEntityAction(u,p)],P=(0,E.H)(s,h,x);return"cursor"===c?(0,n.jsx)(D,{columns:t||z.F,isLoading:o,title:f,actions:a||j,options:i,data:P,next:m?.next,prev:m?.prev}):"offset"===c?(0,n.jsx)(T,{columns:t||z.F,isLoading:o,title:f,actions:a||j,options:i,data:P}):r?(0,n.jsx)(y.B,{severity:"error",title:"Could not load available documentation.",children:(0,n.jsx)(S.z,{language:"text",text:r.toString()})}):(0,n.jsx)(I.o,{title:f,entities:s,loading:o,actions:a||j,columns:t,options:i})};N.columns=z.B,N.actions=B.f;let R=e=>{let{initialFilter:t="owned",columns:a,actions:i,ownerPickerMode:g,pagination:h,options:x,PageWrapper:f,CustomHeader:C}=e,v=f||p.S,y=C||(()=>(0,n.jsx)(o.d,{title:"",children:(0,n.jsx)(r.Y,{children:"Discover documentation in your ecosystem."})}));return(0,n.jsx)(v,{children:(0,n.jsxs)(s.U,{children:[(0,n.jsx)(y,{}),(0,n.jsx)(l.B9,{pagination:h,children:(0,n.jsxs)(d.GI,{children:[(0,n.jsxs)(d.GI.Filters,{children:[(0,n.jsx)(j,{}),(0,n.jsx)(c.y,{initialFilter:t}),(0,n.jsx)(m.t,{mode:g}),(0,n.jsx)(u.m,{})]}),(0,n.jsx)(d.GI.Content,{children:(0,n.jsx)(N,{actions:i,columns:a,options:x})})]})})]})})},F=e=>(0,i.P1)()||(0,n.jsx)(R,{...e})},88461(e,t,a){a.d(t,{S:()=>s});var n=a(31085),i=a(92303),o=a(96170),r=a(96814);let s=e=>{let{children:t,CustomPageWrapper:a}=e,s=(0,o.gf)(r.U),l=`Documentation available in ${s.getOptionalString("organization.name")??"Backstage"}`;return(0,n.jsx)(n.Fragment,{children:a?(0,n.jsx)(a,{children:t}):(0,n.jsx)(i.d,{title:"Documentation",subtitle:l,themeId:"documentation",children:t})})}},55290(e,t,a){var n=a(4293),i=a(78920);t.default=void 0;var o=i(a(14041));t.default=(0,n(a(74044)).default)(o.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"}),"Share")}}]);
//# sourceMappingURL=4532.312b2bfe.chunk.js.map
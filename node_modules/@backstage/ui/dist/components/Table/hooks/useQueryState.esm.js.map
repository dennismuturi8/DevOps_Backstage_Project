{"version":3,"file":"useQueryState.esm.js","sources":["../../../../src/components/Table/hooks/useQueryState.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { useMemo, useState, useCallback } from 'react';\nimport type { QueryOptions, QueryState } from './types';\n\nfunction useControlledStateHelper<T, TControlled = T, TInitial = TControlled>(\n  initialValue: TInitial,\n  controlledValue: TControlled | undefined,\n  onChange: ((value: T) => void) | undefined,\n) {\n  const [internalValue, setInternalValue] = useState<TInitial>(initialValue);\n\n  const value = controlledValue !== undefined ? controlledValue : internalValue;\n\n  const setValue = useCallback(\n    (newValue: T) => {\n      if (controlledValue === undefined) {\n        setInternalValue(newValue as unknown as TInitial);\n      }\n      if (onChange) {\n        onChange(newValue);\n      }\n    },\n    [controlledValue, onChange],\n  );\n\n  return [value, setValue] as const;\n}\n\n/** @internal */\nexport function useQueryState<TFilter>(\n  options: QueryOptions<TFilter>,\n): QueryState<TFilter> {\n  const [sort, setSort] = useControlledStateHelper(\n    options.initialSort ?? null,\n    options.sort,\n    options.onSortChange,\n  );\n  const [filter, setFilter] = useControlledStateHelper(\n    options.initialFilter,\n    options.filter,\n    options.onFilterChange,\n  );\n  const [search, setSearch] = useControlledStateHelper(\n    options.initialSearch ?? '',\n    options.search,\n    options.onSearchChange,\n  );\n\n  return useMemo(\n    () => ({ sort, setSort, filter, setFilter, search, setSearch }),\n    [sort, setSort, filter, setFilter, search, setSearch],\n  );\n}\n"],"names":[],"mappings":";;AAmBA,SAAS,wBAAA,CACP,YAAA,EACA,eAAA,EACA,QAAA,EACA;AACA,EAAA,MAAM,CAAC,aAAA,EAAe,gBAAgB,CAAA,GAAI,SAAmB,YAAY,CAAA;AAEzE,EAAA,MAAM,KAAA,GAAQ,eAAA,KAAoB,MAAA,GAAY,eAAA,GAAkB,aAAA;AAEhE,EAAA,MAAM,QAAA,GAAW,WAAA;AAAA,IACf,CAAC,QAAA,KAAgB;AACf,MAAA,IAAI,oBAAoB,MAAA,EAAW;AACjC,QAAA,gBAAA,CAAiB,QAA+B,CAAA;AAAA,MAClD;AACA,MAAA,IAAI,QAAA,EAAU;AACZ,QAAA,QAAA,CAAS,QAAQ,CAAA;AAAA,MACnB;AAAA,IACF,CAAA;AAAA,IACA,CAAC,iBAAiB,QAAQ;AAAA,GAC5B;AAEA,EAAA,OAAO,CAAC,OAAO,QAAQ,CAAA;AACzB;AAGO,SAAS,cACd,OAAA,EACqB;AACrB,EAAA,MAAM,CAAC,IAAA,EAAM,OAAO,CAAA,GAAI,wBAAA;AAAA,IACtB,QAAQ,WAAA,IAAe,IAAA;AAAA,IACvB,OAAA,CAAQ,IAAA;AAAA,IACR,OAAA,CAAQ;AAAA,GACV;AACA,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,wBAAA;AAAA,IAC1B,OAAA,CAAQ,aAAA;AAAA,IACR,OAAA,CAAQ,MAAA;AAAA,IACR,OAAA,CAAQ;AAAA,GACV;AACA,EAAA,MAAM,CAAC,MAAA,EAAQ,SAAS,CAAA,GAAI,wBAAA;AAAA,IAC1B,QAAQ,aAAA,IAAiB,EAAA;AAAA,IACzB,OAAA,CAAQ,MAAA;AAAA,IACR,OAAA,CAAQ;AAAA,GACV;AAEA,EAAA,OAAO,OAAA;AAAA,IACL,OAAO,EAAE,IAAA,EAAM,SAAS,MAAA,EAAQ,SAAA,EAAW,QAAQ,SAAA,EAAU,CAAA;AAAA,IAC7D,CAAC,IAAA,EAAM,OAAA,EAAS,MAAA,EAAQ,SAAA,EAAW,QAAQ,SAAS;AAAA,GACtD;AACF;;;;"}
{"version":3,"file":"parsing.cjs.js","sources":["../../../src/entrypoints/discovery/parsing.ts"],"sourcesContent":["/*\n * Copyright 2025 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Config } from '@backstage/config';\nimport type { HostDiscoveryEndpoint } from './HostDiscovery';\n\nexport function getEndpoints(config: Config): HostDiscoveryEndpoint[] {\n  const endpoints: HostDiscoveryEndpoint[] = [];\n  // Allow config to override the default endpoints\n  const endpointConfigs = config.getOptionalConfigArray('discovery.endpoints');\n  for (const endpointConfig of endpointConfigs ?? []) {\n    if (typeof endpointConfig.get('target') === 'string') {\n      endpoints.push({\n        target: endpointConfig.getString('target'),\n        plugins: endpointConfig.getStringArray('plugins'),\n      });\n    } else {\n      endpoints.push({\n        target: {\n          internal: endpointConfig.getOptionalString('target.internal'),\n          external: endpointConfig.getOptionalString('target.external'),\n        },\n        plugins: endpointConfig.getStringArray('plugins'),\n      });\n    }\n  }\n  return endpoints;\n}\n"],"names":[],"mappings":";;AAmBO,SAAS,aAAa,MAAA,EAAyC;AACpE,EAAA,MAAM,YAAqC,EAAC;AAE5C,EAAA,MAAM,eAAA,GAAkB,MAAA,CAAO,sBAAA,CAAuB,qBAAqB,CAAA;AAC3E,EAAA,KAAA,MAAW,cAAA,IAAkB,eAAA,IAAmB,EAAC,EAAG;AAClD,IAAA,IAAI,OAAO,cAAA,CAAe,GAAA,CAAI,QAAQ,MAAM,QAAA,EAAU;AACpD,MAAA,SAAA,CAAU,IAAA,CAAK;AAAA,QACb,MAAA,EAAQ,cAAA,CAAe,SAAA,CAAU,QAAQ,CAAA;AAAA,QACzC,OAAA,EAAS,cAAA,CAAe,cAAA,CAAe,SAAS;AAAA,OACjD,CAAA;AAAA,IACH,CAAA,MAAO;AACL,MAAA,SAAA,CAAU,IAAA,CAAK;AAAA,QACb,MAAA,EAAQ;AAAA,UACN,QAAA,EAAU,cAAA,CAAe,iBAAA,CAAkB,iBAAiB,CAAA;AAAA,UAC5D,QAAA,EAAU,cAAA,CAAe,iBAAA,CAAkB,iBAAiB;AAAA,SAC9D;AAAA,QACA,OAAA,EAAS,cAAA,CAAe,cAAA,CAAe,SAAS;AAAA,OACjD,CAAA;AAAA,IACH;AAAA,EACF;AACA,EAAA,OAAO,SAAA;AACT;;;;"}
{"version":3,"file":"GoogleGcsIntegration.cjs.js","sources":["../../src/googleGcs/GoogleGcsIntegration.ts"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { basicIntegrations, defaultScmResolveUrl } from '../helpers';\nimport { ScmIntegration, ScmIntegrationsFactory } from '../types';\nimport {\n  GoogleGcsIntegrationConfig,\n  readGoogleGcsIntegrationConfig,\n  GOOGLE_GCS_HOST,\n} from './config';\n\n/**\n * A Google Cloud Storage based integration.\n *\n * @public\n */\nexport class GoogleGcsIntegration implements ScmIntegration {\n  static factory: ScmIntegrationsFactory<GoogleGcsIntegration> = ({\n    config,\n  }) => {\n    const gcsConfig = config.has('integrations.googleGcs')\n      ? readGoogleGcsIntegrationConfig(\n          config.getConfig('integrations.googleGcs'),\n        )\n      : { host: GOOGLE_GCS_HOST };\n\n    return basicIntegrations(\n      [new GoogleGcsIntegration(gcsConfig)],\n      i => i.config.host,\n    );\n  };\n\n  get type(): string {\n    return 'googleGcs';\n  }\n\n  get title(): string {\n    return this.integrationConfig.host;\n  }\n\n  get config(): GoogleGcsIntegrationConfig {\n    return this.integrationConfig;\n  }\n\n  constructor(private readonly integrationConfig: GoogleGcsIntegrationConfig) {}\n\n  resolveUrl(options: {\n    url: string;\n    base: string;\n    lineNumber?: number | undefined;\n  }): string {\n    return defaultScmResolveUrl(options);\n  }\n\n  resolveEditUrl(url: string): string {\n    return url;\n  }\n}\n"],"names":["config","readGoogleGcsIntegrationConfig","GOOGLE_GCS_HOST","basicIntegrations","defaultScmResolveUrl"],"mappings":";;;;;AA6BO,MAAM,oBAAA,CAA+C;AAAA,EA4B1D,YAA6B,iBAAA,EAA+C;AAA/C,IAAA,IAAA,CAAA,iBAAA,GAAA,iBAAA;AAAA,EAAgD;AAAA,EA3B7E,OAAO,UAAwD,CAAC;AAAA,YAC9DA;AAAA,GACF,KAAM;AACJ,IAAA,MAAM,SAAA,GAAYA,QAAA,CAAO,GAAA,CAAI,wBAAwB,CAAA,GACjDC,qCAAA;AAAA,MACED,QAAA,CAAO,UAAU,wBAAwB;AAAA,KAC3C,GACA,EAAE,IAAA,EAAME,sBAAA,EAAgB;AAE5B,IAAA,OAAOC,yBAAA;AAAA,MACL,CAAC,IAAI,oBAAA,CAAqB,SAAS,CAAC,CAAA;AAAA,MACpC,CAAA,CAAA,KAAK,EAAE,MAAA,CAAO;AAAA,KAChB;AAAA,EACF,CAAA;AAAA,EAEA,IAAI,IAAA,GAAe;AACjB,IAAA,OAAO,WAAA;AAAA,EACT;AAAA,EAEA,IAAI,KAAA,GAAgB;AAClB,IAAA,OAAO,KAAK,iBAAA,CAAkB,IAAA;AAAA,EAChC;AAAA,EAEA,IAAI,MAAA,GAAqC;AACvC,IAAA,OAAO,IAAA,CAAK,iBAAA;AAAA,EACd;AAAA,EAIA,WAAW,OAAA,EAIA;AACT,IAAA,OAAOC,6BAAqB,OAAO,CAAA;AAAA,EACrC;AAAA,EAEA,eAAe,GAAA,EAAqB;AAClC,IAAA,OAAO,GAAA;AAAA,EACT;AACF;;;;"}
'use strict';

var ipcClient = require('./ipcClient.cjs.js');

class DevDataStore {
  static #instance;
  /**
   * Tries to acquire a DevDataStore instance. This will only succeed when the backend
   * process is being run through the `@backstage/cli` in development mode.
   *
   * @returns A DevDataStore instance, or undefined if not available.
   */
  static get() {
    if (ipcClient.ipcClient) {
      if (!this.#instance) {
        this.#instance = new DevDataStore(ipcClient.ipcClient);
      }
      return this.#instance;
    }
    return void 0;
  }
  /** @internal */
  static forTest(client) {
    return new DevDataStore(client);
  }
  #client;
  constructor(client) {
    this.#client = client;
  }
  /**
   * Save data to the data store.
   *
   * @param key - The key used to identify the data.
   * @param data - The data to save. The data will be serialized using advanced IPC serialization.
   * @returns A promise that resolves to a result object that indicates whether the data was saved.
   */
  async save(key, data) {
    return this.#client.request(
      "DevDataStore.save",
      { key, data }
    );
  }
  /**
   * Loads data from the data store.
   *
   * @param key - The key used to identify the data.
   * @returns A promise that resolves to a result object that indicates whether the data was loaded, as well as the data.
   */
  async load(key) {
    const result = await this.#client.request(
      "DevDataStore.load",
      { key }
    );
    return result;
  }
}

exports.DevDataStore = DevDataStore;
//# sourceMappingURL=DevDataStore.cjs.js.map

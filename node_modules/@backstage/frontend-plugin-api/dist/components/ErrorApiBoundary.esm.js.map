{"version":3,"file":"ErrorApiBoundary.esm.js","sources":["../../src/components/ErrorApiBoundary.tsx"],"sourcesContent":["/*\n * Copyright 2023 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { Component, ErrorInfo, ReactNode } from 'react';\nimport { AppNode, ErrorApi } from '../apis';\nimport { ForwardedError } from '@backstage/errors';\n\n/** @internal */\nexport class ErrorApiBoundary extends Component<\n  {\n    children: ReactNode;\n    node: AppNode;\n    errorApi?: ErrorApi;\n  },\n  { error?: Error }\n> {\n  static getDerivedStateFromError(error: Error) {\n    return { error };\n  }\n\n  state = { error: undefined };\n\n  componentDidCatch(error: Error, _errorInfo: ErrorInfo) {\n    const { node, errorApi } = this.props;\n    errorApi?.post(\n      new ForwardedError(`Error in extension '${node.spec.id}'`, error),\n    );\n  }\n\n  render() {\n    if (this.state.error) {\n      return null;\n    }\n\n    return this.props.children;\n  }\n}\n"],"names":[],"mappings":";;;AAqBO,MAAM,yBAAyB,SAAA,CAOpC;AAAA,EACA,OAAO,yBAAyB,KAAA,EAAc;AAC5C,IAAA,OAAO,EAAE,KAAA,EAAM;AAAA,EACjB;AAAA,EAEA,KAAA,GAAQ,EAAE,KAAA,EAAO,MAAA,EAAU;AAAA,EAE3B,iBAAA,CAAkB,OAAc,UAAA,EAAuB;AACrD,IAAA,MAAM,EAAE,IAAA,EAAM,QAAA,EAAS,GAAI,IAAA,CAAK,KAAA;AAChC,IAAA,QAAA,EAAU,IAAA;AAAA,MACR,IAAI,cAAA,CAAe,CAAA,oBAAA,EAAuB,KAAK,IAAA,CAAK,EAAE,KAAK,KAAK;AAAA,KAClE;AAAA,EACF;AAAA,EAEA,MAAA,GAAS;AACP,IAAA,IAAI,IAAA,CAAK,MAAM,KAAA,EAAO;AACpB,MAAA,OAAO,IAAA;AAAA,IACT;AAEA,IAAA,OAAO,KAAK,KAAA,CAAM,QAAA;AAAA,EACpB;AACF;;;;"}
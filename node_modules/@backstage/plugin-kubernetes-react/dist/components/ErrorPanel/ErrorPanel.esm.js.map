{"version":3,"file":"ErrorPanel.esm.js","sources":["../../../src/components/ErrorPanel/ErrorPanel.tsx"],"sourcesContent":["/*\n * Copyright 2020 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { ReactNode } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { ClusterObjects } from '@backstage/plugin-kubernetes-common';\nimport { WarningPanel } from '@backstage/core-components';\nimport {\n  useTranslationRef,\n  TranslationFunction,\n} from '@backstage/core-plugin-api/alpha';\nimport { kubernetesReactTranslationRef } from '../../translation';\n\nconst clustersWithErrorsToErrorMessage = (\n  clustersWithErrors: ClusterObjects[],\n  t: TranslationFunction<typeof kubernetesReactTranslationRef.T>,\n): ReactNode => {\n  return clustersWithErrors.map((c, i) => {\n    return (\n      <div key={i}>\n        <Typography variant=\"body2\">\n          {t('errorPanel.clusterLabelValue', {\n            cluster: c.cluster.title || c.cluster.name,\n          })}\n        </Typography>\n        {c.errors.map((e, j) => {\n          return (\n            <Typography variant=\"body2\" key={j}>\n              {e.errorType === 'FETCH_ERROR'\n                ? t('errorPanel.fetchError', {\n                    errorType: e.errorType,\n                    message: e.message,\n                  })\n                : t('errorPanel.resourceError', {\n                    resourcePath: e.resourcePath ?? '',\n                    errorType: e.errorType,\n                    statusCode: String(e.statusCode ?? ''),\n                  })}\n            </Typography>\n          );\n        })}\n        <br />\n      </div>\n    );\n  });\n};\n\n/**\n *\n *\n * @public\n */\nexport type ErrorPanelProps = {\n  entityName: string;\n  errorMessage?: string;\n  clustersWithErrors?: ClusterObjects[];\n  children?: ReactNode;\n};\n\n/**\n *\n *\n * @public\n */\nexport const ErrorPanel = ({\n  entityName,\n  errorMessage,\n  clustersWithErrors,\n}: ErrorPanelProps) => {\n  const { t } = useTranslationRef(kubernetesReactTranslationRef);\n  return (\n    <WarningPanel\n      title={t('errorPanel.title')}\n      message={t('errorPanel.message', { entityName })}\n    >\n      {clustersWithErrors && (\n        <div>\n          {t('errorPanel.errorsLabel')}:{' '}\n          {clustersWithErrorsToErrorMessage(clustersWithErrors, t)}\n        </div>\n      )}\n      {errorMessage && (\n        <Typography variant=\"body2\">\n          {t('errorPanel.errorsLabel')}: {errorMessage}\n        </Typography>\n      )}\n    </WarningPanel>\n  );\n};\n"],"names":[],"mappings":";;;;;;AA0BA,MAAM,gCAAA,GAAmC,CACvC,kBAAA,EACA,CAAA,KACc;AACd,EAAA,OAAO,kBAAA,CAAmB,GAAA,CAAI,CAAC,CAAA,EAAG,CAAA,KAAM;AACtC,IAAA,4BACG,KAAA,EAAA,EACC,QAAA,EAAA;AAAA,sBAAA,GAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EACjB,QAAA,EAAA,CAAA,CAAE,8BAAA,EAAgC;AAAA,QACjC,OAAA,EAAS,CAAA,CAAE,OAAA,CAAQ,KAAA,IAAS,EAAE,OAAA,CAAQ;AAAA,OACvC,CAAA,EACH,CAAA;AAAA,MACC,CAAA,CAAE,MAAA,CAAO,GAAA,CAAI,CAAC,GAAG,CAAA,KAAM;AACtB,QAAA,uBACE,GAAA,CAAC,cAAW,OAAA,EAAQ,OAAA,EACjB,YAAE,SAAA,KAAc,aAAA,GACb,EAAE,uBAAA,EAAyB;AAAA,UACzB,WAAW,CAAA,CAAE,SAAA;AAAA,UACb,SAAS,CAAA,CAAE;AAAA,SACZ,CAAA,GACD,CAAA,CAAE,0BAAA,EAA4B;AAAA,UAC5B,YAAA,EAAc,EAAE,YAAA,IAAgB,EAAA;AAAA,UAChC,WAAW,CAAA,CAAE,SAAA;AAAA,UACb,UAAA,EAAY,MAAA,CAAO,CAAA,CAAE,UAAA,IAAc,EAAE;AAAA,SACtC,KAV0B,CAWjC,CAAA;AAAA,MAEJ,CAAC,CAAA;AAAA,0BACA,IAAA,EAAA,EAAG;AAAA,KAAA,EAAA,EAtBI,CAuBV,CAAA;AAAA,EAEJ,CAAC,CAAA;AACH,CAAA;AAmBO,MAAM,aAAa,CAAC;AAAA,EACzB,UAAA;AAAA,EACA,YAAA;AAAA,EACA;AACF,CAAA,KAAuB;AACrB,EAAA,MAAM,EAAE,CAAA,EAAE,GAAI,iBAAA,CAAkB,6BAA6B,CAAA;AAC7D,EAAA,uBACE,IAAA;AAAA,IAAC,YAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,EAAE,kBAAkB,CAAA;AAAA,MAC3B,OAAA,EAAS,CAAA,CAAE,oBAAA,EAAsB,EAAE,YAAY,CAAA;AAAA,MAE9C,QAAA,EAAA;AAAA,QAAA,kBAAA,yBACE,KAAA,EAAA,EACE,QAAA,EAAA;AAAA,UAAA,CAAA,CAAE,wBAAwB,CAAA;AAAA,UAAE,GAAA;AAAA,UAAE,GAAA;AAAA,UAC9B,gCAAA,CAAiC,oBAAoB,CAAC;AAAA,SAAA,EACzD,CAAA;AAAA,QAED,YAAA,oBACC,IAAA,CAAC,UAAA,EAAA,EAAW,OAAA,EAAQ,OAAA,EACjB,QAAA,EAAA;AAAA,UAAA,CAAA,CAAE,wBAAwB,CAAA;AAAA,UAAE,IAAA;AAAA,UAAG;AAAA,SAAA,EAClC;AAAA;AAAA;AAAA,GAEJ;AAEJ;;;;"}
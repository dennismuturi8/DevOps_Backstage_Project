{"version":3,"file":"PluginWrapperApi.esm.js","sources":["../../src/extensions/PluginWrapperApi.ts"],"sourcesContent":["/*\n * Copyright 2024 The Backstage Authors\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport {\n  PluginWrapperBlueprint,\n  pluginWrapperApiRef,\n} from '@backstage/frontend-plugin-api/alpha';\nimport {\n  createExtensionInput,\n  ApiBlueprint,\n} from '@backstage/frontend-plugin-api';\nimport { DefaultPluginWrapperApi } from '../apis/PluginWrapperApi';\n\n/**\n * Contains the plugin wrappers installed into the app.\n */\nexport const PluginWrapperApi = ApiBlueprint.makeWithOverrides({\n  name: 'plugin-wrapper',\n  inputs: {\n    wrappers: createExtensionInput([PluginWrapperBlueprint.dataRefs.wrapper]),\n  },\n  factory: (originalFactory, { inputs }) => {\n    return originalFactory(defineParams =>\n      defineParams({\n        api: pluginWrapperApiRef,\n        deps: {},\n        factory: () => {\n          return DefaultPluginWrapperApi.fromWrappers(\n            inputs.wrappers.map(wrapperInput => ({\n              loader: wrapperInput.get(PluginWrapperBlueprint.dataRefs.wrapper),\n              pluginId: wrapperInput.node.spec.plugin.id ?? 'app',\n            })),\n          );\n        },\n      }),\n    );\n  },\n});\n"],"names":[],"mappings":";;;;AA6BO,MAAM,gBAAA,GAAmB,aAAa,iBAAA,CAAkB;AAAA,EAC7D,IAAA,EAAM,gBAAA;AAAA,EACN,MAAA,EAAQ;AAAA,IACN,UAAU,oBAAA,CAAqB,CAAC,sBAAA,CAAuB,QAAA,CAAS,OAAO,CAAC;AAAA,GAC1E;AAAA,EACA,OAAA,EAAS,CAAC,eAAA,EAAiB,EAAE,QAAO,KAAM;AACxC,IAAA,OAAO,eAAA;AAAA,MAAgB,kBACrB,YAAA,CAAa;AAAA,QACX,GAAA,EAAK,mBAAA;AAAA,QACL,MAAM,EAAC;AAAA,QACP,SAAS,MAAM;AACb,UAAA,OAAO,uBAAA,CAAwB,YAAA;AAAA,YAC7B,MAAA,CAAO,QAAA,CAAS,GAAA,CAAI,CAAA,YAAA,MAAiB;AAAA,cACnC,MAAA,EAAQ,YAAA,CAAa,GAAA,CAAI,sBAAA,CAAuB,SAAS,OAAO,CAAA;AAAA,cAChE,QAAA,EAAU,YAAA,CAAa,IAAA,CAAK,IAAA,CAAK,OAAO,EAAA,IAAM;AAAA,aAChD,CAAE;AAAA,WACJ;AAAA,QACF;AAAA,OACD;AAAA,KACH;AAAA,EACF;AACF,CAAC;;;;"}